/*! Fabrik */
FbCheckBox=new Class({Extends:FbElementList,type:"checkbox",initialize:function(a,b){this.setPlugin("fabrikcheckbox"),this.parent(a,b),this._getSubElements()},watchAddToggle:function(){var a=this.getContainer(),b=a.getElement("div.addoption"),c=a.getElement(".toggle-addoption");if(this.mySlider){var d=b.clone(),e=a.getElement(".fabrikElement");b.getParent().destroy(),e.adopt(d),b=a.getElement("div.addoption"),b.setStyle("margin",0)}this.mySlider=new Fx.Slide(b,{duration:500}),this.mySlider.hide(),c.addEvent("click",function(a){a.stop(),this.mySlider.toggle()}.bind(this))},getValue:function(){if(!this.options.editable)return this.options.value;var a=[];return this.options.editable?(this._getSubElements().each(function(b){b.checked&&a.push(b.get("value"))}),a):this.options.value},numChecked:function(){return this._getSubElements().filter(function(a){return a.checked}).length},update:function(a){if(this.getElement(),"string"===typeOf(a)&&(a=""===a?[]:JSON.decode(a)),!this.options.editable){if(this.element.innerHTML="",""===a)return;var b=$H(this.options.data);return void a.each(function(a){this.element.innerHTML+=b.get(a)+"<br />"}.bind(this))}this._getSubElements(),this.subElements.each(function(b){var c=!1;a.each(function(a){a===b.value&&(c=!0)}.bind(this)),b.checked=c}.bind(this))},cloned:function(a){this.options.allowadd===!0&&this.options.editable!==!1&&(this.watchAddToggle(),this.watchAdd()),this.parent(a)}});