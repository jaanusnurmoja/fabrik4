/*! Fabrik */
define(["jquery","fab/elementlist"],function(a,b){return window.FbRadio=new Class({Extends:b,mySlider:!1,options:{btnGroup:!0},type:"radio",initialize:function(a,b){this.setPlugin("fabrikradiobutton"),this.parent(a,b),this.btnGroup()},btnGroup:function(){if(this.options.btnGroup){this.btnGroupRelay();var b=a(this.getContainer());b.find(".radio.btn-group label").addClass("btn"),b.find(".btn-group input[checked=checked]").each(function(){var b,c=a(this),d=c.closest("label");0===d.length&&(d=c.next()),b=c.val(),d.addClass(""===b?"active btn-primary":"0"===b?"active btn-danger":"active btn-success")})}},btnGroupRelay:function(){var b=a(this.getContainer()),c=this;b.find(".radio.btn-group label").addClass("btn"),b.on("click",".btn-group label",function(){var b=a(this),d=[],e=b.prop("for");""!==e&&(d=a("#"+e)),0===d.length&&(d=b.find("input")),c.setButtonGroupCSS(d)})},setButtonGroupCSS:function(b){var c=[];""!==b.prop("id")&&(c=a("label[for="+b.id+"]")),0===c.length&&(c=b.closest("label.btn"));var d=b.val(),e=parseInt(b.prop("fabchecked"),10);b.prop("checked")&&1!==e||(c&&(c.closest(".btn-group").find("label").removeClass("active").removeClass("btn-success").removeClass("btn-danger").removeClass("btn-primary"),c.addClass(""===d?"active btn-primary":0===parseInt(d,10)?"active btn-danger":"active btn-success")),b.prop("checked",!0),b.trigger("change"),b.trigger("click"),null===e&&b.prop("fabchecked",1))},watchAddToggle:function(){var b=a(this.getContainer()),c=b.find("div.addoption"),d=b.find(".toggle-addoption");if(this.mySlider){var e=c.clone(),f=b.find(".fabrikElement");c.parent().remove(),f.append(e),c=b.find("div.addoption"),c.css("margin",0)}c.slideToggle(),this.mySlider=c,d.on("click",function(a){a.preventDefault(),c.slideToggle()})},getValue:function(){if(!this.options.editable)return this.options.value;var a="";return this._getSubElements().each(function(b){return b.checked?a=b.get("value"):null}),a},setValue:function(a){this.options.editable&&this._getSubElements().each(function(b){b.value===a&&(b.checked="checked")})},update:function(a){var b=this;if(!this.options.editable)return""===a?void(this.element.innerHTML=""):void(this.element.innerHTML=this.options.data[a]);var c=this._getSubElements();c.each("array"===typeOf(a)?function(c){a.contains(c.value)&&b.setButtonGroupCSS(c)}:function(c){c.value===a&&b.setButtonGroupCSS(c)})},cloned:function(a){this.options.allowadd===!0&&this.options.editable!==!1&&(this.watchAddToggle(),this.watchAdd()),this.parent(a),this.btnGroup()},getChangeEvent:function(){return this.options.changeEvent}}),window.FbRadio});