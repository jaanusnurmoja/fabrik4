var FbThumbsList=new Class({options:{imageover:"",imageout:"",userid:""},Implements:[Events,Options],initialize:function(b,a){this.setOptions(a);this.col=$$("."+b);this.origThumbUp={};this.origThumbDown={};this.col.each(function(e){var f=e.getParent(".fabrik_row");if(f){var d=f.id.replace("list_"+this.options.listid+"_row_","");var c=e.getElements(".thumbup");var g=e.getElements(".thumbdown");c.each(function(h){h.addEvent("mouseover",function(i){h.setStyle("cursor","pointer");h.src=this.options.imagepath+"thumb_up_in.gif"}.bind(this));h.addEvent("mouseout",function(i){h.setStyle("cursor","");if(this.options.myThumbs[d]==="up"){h.src=this.options.imagepath+"thumb_up_in.gif"}else{h.src=this.options.imagepath+"thumb_up_out.gif"}}.bind(this));h.addEvent("click",function(i){this.doAjax(h,"up")}.bind(this))}.bind(this));g.each(function(h){h.addEvent("mouseover",function(i){h.setStyle("cursor","pointer");h.src=this.options.imagepath+"thumb_down_in.gif"}.bind(this));h.addEvent("mouseout",function(i){h.setStyle("cursor","");if(this.options.myThumbs[d]==="down"){h.src=this.options.imagepath+"thumb_down_in.gif"}else{h.src=this.options.imagepath+"thumb_down_out.gif"}}.bind(this));h.addEvent("click",function(i){this.doAjax(h,"down")}.bind(this))}.bind(this))}}.bind(this))},doAjax:function(g,a){var h=g.getParent(".fabrik_row");var c=h.id.replace("list_"+this.options.listid+"_row_","");var f=$("count_thumb"+a+c);Fabrik.loader.start(f);this.thumb=a;var d={row_id:c,elementname:this.options.elid,userid:this.options.userid,thumb:this.thumb,listid:this.options.listid};var b=Fabrik.liveSite+"/index.php?option=com_fabrik&format=raw&view=plugin&task=pluginAjax&g=element&plugin=thumbs&method=ajax_rate&element_id="+this.options.elid+"&thumb="+this.thumb+"&row_id="+c;new Request({url:b,data:d,onComplete:function(j){var i=document.id("count_thumbup"+c);var k=document.id("count_thumbdown"+c);var e=h.getElements(".thumbup");var l=h.getElements(".thumbdown");this.spinner.dispose();Fabrik.loader.stop(f);j=JSON.decode(j);if(j.error){console.log(j.error)}else{i.set("html",j[0]);k.set("html",j[1])}}.bind(this)}).send()}});