var FbCalcList=new Class({options:{},Implements:[Events,Options],initialize:function(t,i){i.element=t,this.setOptions(i),this.col=$$("."+t),this.list=Fabrik.blocks[this.options.listRef],this.options.doListUpdate&&Fabrik.addEvent("fabrik.list.updaterows",function(){this.update()}.bind(this))},update:function(){var t={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"calc",g:"element",listid:this.options.listid,formid:this.options.formid,method:"ajax_listUpdate",element_id:this.options.elid,rows:this.list.getRowIds(),elementname:this.options.elid};new Request.JSON({url:"",data:t,onError:function(t,i){fconsole("Fabrik:list-calc:update error:"+i,t)},onFailure:function(t){fconsole(t)},onSuccess:function(t){var i=Object.prototype.hasOwnProperty;for(var s in t)i.call(t,s)&&"string"==typeof t[s]&&(t[s]=Encoder.htmlDecode(t[s]));$H(t).each(function(t,i){var s=this.list.list.getElement("#"+i+" ."+this.options.element);"null"!==typeOf(s)&&t!==!1&&s.set("html",t)}.bind(this))}.bind(this)}).send()}});