var tablesElement=new Class({Implements:[Options,Events],options:{conn:null},initialize:function(b,a){this.el=b;this.setOptions(a);this.updateMeEvent=this.updateMe.bindWithEvent(this);if(typeOf($(this.options.conn))==="null"){this.periodical=this.getCnn.periodical(500,this)}else{this.setUp()}},cloned:function(){},getCnn:function(){if(typeOf($(this.options.conn))==="null"){return}this.setUp();clearInterval(this.periodical)},setUp:function(){this.el=$(this.el);$(this.options.conn).addEvent("change",this.updateMeEvent);var a=$(this.options.conn).get("value");if(a!==""&&a!==-1){this.updateMe()}},updateMe:function(c){if(c){c.stop()}if($(this.el.id+"_loader")){$(this.el.id+"_loader").show()}var d=$(this.options.conn).get("value");var a="index.php?option=com_fabrik&format=raw&task=plugin.pluginAjax&g=element&plugin=field&method=ajax_tables&cid="+d;var b=new Request({url:a,method:"get",onComplete:function(f){var e=JSON.decode(f);if(typeOf(e)!=="null"){if(e.err){alert(e.err)}else{this.el.empty();e.each(function(g){var h={value:g};if(g===this.options.value){h.selected="selected"}if($(this.el.id+"_loader")){$(this.el.id+"_loader").setStyle("display","none")}new Element("option",h).set("text",g).inject(this.el)}.bind(this))}}}.bind(this),onFailure:function(e){if($(this.el.id+"_loader")){$(this.el.id+"_loader").hide()}}.bind(this)}).send()}});